{
  "setup": {
    "php": {
      "version": "8.3",
      "extensions": [
        "ctype",
        "curl",
        "dom",
        "fileinfo",
        "filter",
        "hash",
        "mbstring",
        "openssl",
        "pcre",
        "pdo",
        "session",
        "tokenizer",
        "xml",
        "pdo_mysql",
        "bcmath",
        "gd",
        "gmp"
      ]
    },
    "node": {
      "version": "22"
    }
  },
  "build": {
    "steps": [
      "cd core && composer install --ignore-platform-req=ext-bcmath --ignore-platform-req=ext-gd --ignore-platform-req=ext-gmp --optimize-autoloader --no-scripts --no-interaction",
      "npm install",
      "npm run build",
      "chmod -R a+rw storage bootstrap/cache || true",
      "cd core && php artisan config:cache",
      "cd core && php artisan route:cache",
      "cd core && php artisan view:cache"
    ],
    "env": {
      "APP_ENV": "production"
    }
  }
}
